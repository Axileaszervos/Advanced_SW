# Advanced_SW

# Technical Documentation

## How It Works
Το παρόν αποθετήριο δημιουργήθηκε με σκοπό την ανάπτυξη ενός Python script που μεταφράζει τα αρχεία του `submodule gallery` του αποθετηρίου `pibook` από τα Ελληνικά στα Αγγλικά, χρησιμοποιώντας τεχνητή νοημοσύνη.

Συγκεκριμένα, το script κλωνοποιεί τα απαραίτητα αρχεία τοπικά. Στη συνέχεια, ο χρήστης εκτελεί το script μέσω command line. Για κάθε αρχείο, παράγονται δύο εναλλακτικές μεταφράσεις, τις οποίες μπορεί να δει και να επεξεργαστεί, αν το επιθυμεί, πριν το πρόγραμμα συνεχίσει στο επόμενο αρχείο. Η μετάφραση καθοδηγείται από ένα κατάλληλα διαμορφωμένο prompt, το οποίο ζητά από το AI να λειτουργεί ως επαγγελματίας μεταφραστής.

Μετά την ολοκλήρωση της διαδικασίας, τα μεταφρασμένα αρχεία .md αποθηκεύονται στον φάκελο translated και γίνονται commit στο παρόν αποθετήριο.

## Implementation
Η υλοποίηση του script πραγματοποιείται με γλώσσα Python και χωρίζεται σε τρία βασικά μέρη: τις βιβλιοθήκες που χρησιμοποιούνται, τις συναρτήσεις που υλοποιούν τη λειτουργικότητα, και το κύριο μέρος του προγράμματος που καλεί τις συναρτήσεις και εκτελεί τη ροή της μετάφρασης.

### Libraries

`os, subprocess`: Χρήση για διαχείριση αρχείων και εκτέλεση εντολών τερματικού (git).

`requests`: Επικοινωνία με το GitHub API για λήψη αρχείων.

`openai`: Χρήση του OpenAI API για μεταφράσεις.

`prompt_toolkit`: Δυνατότητα επεξεργασίας κειμένου από τον χρήστη μέσα στο τερματικό.

### Functions

#### `PromptSession και KeyBindings`

Χρησιμοποιείται η βιβλιοθήκη `prompt_toolkit` για να δημιουργηθεί ένα διαδραστικό περιβάλλον επεξεργασίας κειμένου μέσα από το terminal.

Το PromptSession επιτρέπει την εισαγωγή και επεξεργασία πολλαπλών γραμμών (multiline=True), διευκολύνοντας τον χρήστη να επεξεργαστεί μεγάλα κομμάτια κειμένου.

Το KeyBindings προσθέτει συντομεύσεις πληκτρολογίου, στην παρούσα περίπτωση, διπλό Enter (δηλαδή enter, enter) για να δηλώσει ότι ο χρήστης ολοκλήρωσε την επεξεργασία και θέλει να συνεχίσει στο επόμενο αρχείο.

Οι δύο αυτές ρυθμίσεις γίνονται μία φορά στην αρχή του script και χρησιμοποιούνται μέσα στη συνάρτηση `edit_text_via_prompt_toolkit(text`) για να ενεργοποιήσουν το custom interactive editor.

#### `get_repo_files()`
Η συνάρτηση get_repo_files() συνδέεται με το GitHub API και ανακτά τη δομή των αρχείων του αποθετηρίου `pibook/_gallery`, χρησιμοποιώντας ένα συγκεκριμένο commit   ID (abb9bb2cf89fcac2c9cd5cb363be5704197d146c). Μέσα από το αποτέλεσμα (git tree), εντοπίζει όλα τα αρχεία που έχουν κατάληξη .md και επιστρέφει μια λίστα με τα paths τους. Η λίστα περιορίζεται στα πρώτα 10 αρχεία στο παρόν scirpt αλλα μπορεί να παραμετροποιηθεί σε περισσότερα.

#### `download_file(file_path)`
Η συνάρτηση download_file() αναλαμβάνει να κατεβάσει ένα αρχείο `md` από το GitHub, με βάση το path που έχει επιστραφεί από την συνάρτηση `get_repo_files()`. Χρησιμοποιεί το raw URL του GitHub και αποθηκεύει το περιεχόμενο τοπικά στον φάκελο `./github_md`.

Για κάθε αρχείο, η συνάρτηση δημιουργεί νέο αρχείο .md με το ίδιο όνομα, αποθηκεύοντας το αρχικό ελληνικό περιεχόμενο ώστε να μπορεί να μεταφραστεί στη συνέχεια. Εάν υπάρξει σφάλμα (π.χ. αποτυχία δικτύου ή λάθος URL), εμφανίζει μήνυμα σφάλματος και επιστρέφει None.

#### `translate_text()`
Η συνάρτηση translate_text() είναι υπεύθυνη για τη μετάφραση του περιεχομένου κάθε αρχείου από τα Ελληνικά στα Αγγλικά, μέσω του μοντέλου `gpt-3.5-turbo` της OpenAI. Παράγει μία μόνο μετάφραση ανά κλήση, αλλά το ύφος της μετάφρασης διαφέρει σημαντικά ανάλογα με την τιμή της παραμέτρου `variation`.

Πιο συγκεκριμένα:

Αν variation=1, η μετάφραση είναι κυριολεκτική, ακριβής και πιστή στη διατύπωση του πρωτοτύπου. Το μοντέλο καθοδηγείται να μην παραφράζει το αρχικό κείμενο και να κρατά αναλλοίωτη τη δομή του (YAML, markdown, λίστες, κ.λπ.).

Αν variation=2, η μετάφραση είναι πιο φυσική και πιό κοντά στην αγγλική ορολογία, δηλαδή σαν να γράφτηκε εξαρχής στα Αγγλικά από κάποιον φυσικό ομιλητή. Σε αυτή την περίπτωση, επιτρέπεται στο μοντέλο να παραφράσει ελαφρώς το κείμενο για να βελτιώσει τη ροή, χωρίς να αλλοιώσει το τεχνικό περιεχόμενο ή τη μορφοποίηση.

### Main_Body
Ορίζει βασικά paths και φακέλους (md_folder, translated, repo folder).

Καλεί την συνάρτηση `get_repo_files()` για να πάρει αρχεία προς μετάφραση.

Για κάθε αρχείο:

Το κατεβάζει με την συνάρτηση `download_file()`

Παράγει δύο μεταφράσεις με την συνάρτηση `translate_text()`

Εμφανίζει τις μεταφράσεις και ζητά από τον χρήστη επιλογή και πιθανή επεξεργασία με την συνάρτηση `edit_text_via_prompt_toolkit()`

Αποθηκεύει την τελική έκδοση στους φακέλους translated και στο repo.

Τέλος, αν υπάρχουν μεταφρασμένα αρχεία, τα κάνει commit και push στο GitHub repo μέσω subprocess και git εντολών.
